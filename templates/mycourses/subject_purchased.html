{% extends 'base.html' %}
{% load humanize %}
{% block content %}

<div class="container">

    {% if messages %}
    <div class="alert alert-success alert-dismissible">
        {% for message in messages %}
        <p>{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}


<div class="row mt-1">
<div class="col-4 m-1">
<div class="card">
            <div class="card-header">
                <h4>{{subject.title}}</h4>
            </div>
        
            <figure>
                <img src="{{subject.thumbnail_file.url}}" alt="Placeholder image" class='card-image-top'>
            </figure>
           

<div class="card-body">
        {% if rating.user != request.user and rating.subject != subject %}
            <!-- ======================Rate the Course============================= -->
            <div class="row">
                <div class="col">
                    <div class="row">
                        <div class="col">
                    <h5>Please rate the course</h5>
                        </div>
                    </div>

            <div class="row">
                <div class="col pt-3">
                    <form action="{% url 'rating' subject.id %}">
                        {% csrf_token %}
                        <div class='rating'>
                            <input type="radio" name="rating" value=5 id="rating1">
                            <label for='rating1'></label>
                            <input type="radio" name="rating" value=4 id="rating2">
                            <label for='rating2'></label>
                            <input type="radio" name="rating" value=3 id="rating3">
                            <label for='rating3'></label>
                            <input type="radio" name="rating" value=2 id="rating4">
                            <label for='rating4'></label>
                            <input type="radio" name="rating" value=1 id="rating5">
                            <label for='rating5'></label>
                        </div>
                        <div class="row">
                            <div class="col mb-2">
                        <!-- <input type="submit" value="Rate" class="btn btn-info btn-block"> -->
                        <input type="submit" value="Rate" class='btn btn-sm btn-block btn-outline-dark'>
                        </div>
                        </div>
                    </form>
                    </div>
                </div>
            </div>
            </div>
    <!-- ========================Display Rating================================= -->
            {% else %}
            <div class="row">
                <div class="col">
                <strong>Rating: </strong>
                {{subject.av_rating}}
                <div class="stars-outer">
                    <div class="stars-inner" style="width: {{subject.percent}}"></div>
                </div>
            </div>
            </div>
            {% endif %}
  
        <div class="row">
            <div class="col">
                <strong>Transactions:</strong> ({{subject.transactions}})
            </div>
        </div>

        <div class="row">
            <div class="col"><strong>Created by: </strong>{{subject.author}}</div>
        </div>
        <div class="row">
            <div class="col"><strong>Date posted: </strong>{{subject.date_posted}}</div>
        </div>
        <div class="row">
            <div class="col">
                <strong>Description: </strong>
            </div>
        </div>
        <div class="row" style='height:6rem'>
            <div class="col">
                {{subject.description}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                <strong>Prerequisite: </strong>
            </div>
        </div>

        <div class="row" style='height:6rem'>
                <div class="col">
                    {{subject.prerequisite}}
                </div>
            </div>

            <!-- <div class="row" style='height:6rem'>
                <div class="col" data-toggle="collapse" data-target='#collapse-p1'><strong>Prerequisites:</strong> </div>
                <div class="collapse show" id='collapse-p1'>{{subject.prerequisite}}</div>
            </div> -->

            <div class="row">
                <div class="col"><strong>Timing: </strong>Count</div>
            </div>

            <!-- =============================================================== -->
    </div>
</div>
</div>


    
  
<div class="col-7 m-1">
    <div class="card">
        <div class="card-header">
            <h4>Content</h4>
        </div>

        <div class="card-body">
            <ul class="list-group list-group-flush">
                {% for lecture in lectures %}
                <li class="list-group-item">
                    <a href="{% url 'video' lecture.id %}" target="_blank">{{lecture.title}}</a>
                    <!-- <input type="submit" value="{{lecture.title}}" class="btn btn-info btn-block"> -->
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

</div>
  

{% if review.author != request.user and review.subject != subject %}
<div class="row mt-3">
    <div class="col">
    <div class="row">    
    <form action="{% url 'review' subject.id %}" method="POST">
            {% csrf_token %}
            <label for="content"><h5>Make a review, please.</h5></label>
    </div>
    
    <div class="form-group">
        <!-- <input type="textarea" id="contetnt" name="content" style="width:700px; height:100px;"><br>   -->
        <!-- <input type="textarea" id="contetnt" name="content" rows="10" cols="30"> -->
        <textarea name="content" class='form-control' rows="5" cols="50" required></textarea>
        </div>
    <div class="row p-2">
        <div class="col-2">
            <input type="submit" value="Post the Review" class='btn btn-sm btn-block btn-outline-dark'>
            <!-- <button type='submit'>Load</button><br> -->
        </div>
    </div>
    </form>
</div>
</div>
{% endif %}


</div>
{% endblock %}