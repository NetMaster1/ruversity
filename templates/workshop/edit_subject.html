{% extends "base.html" %}
{% load static %}
{% block content %}
<!-- <body oncontextmenu="return false;"> -->
<div class="container">
    <div class="row m-auto">
        <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);"
            aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'studio' %}">Творческая студия</a></li>
                <li class="breadcrumb-item active" aria-current="page">Редактирование курса</li>
            </ol>
        </nav>
    </div>

    {% if subject.ready == True %}
    <div class="row p-3 mt-3">
        <div class="col-12">
            Ваш курс был загружен на сервер для продажи. Так как ruversity.com предоставляет неограниченный срок
            использования приобретенного курса, мы вынуждены ограничить вас в вашем праве удалить или редактировать
            данный курс.
            Для внесения изменений в курс свяжитесь с нами по электронной почте.

            <!-- Your course has been uploaded to ruversisty.com & is ready for sale. Since ruversity.com provides life-time access for the buyers, you are no longer able neither to delete it nor edit. In order to make changes in the course you have to apply to us via email. -->
        </div>
    </div>

    {% else %}



<div class="row">
    <div class="col-4">
        <div class="subject_box p-3 m-auto">
            <a href="{% url 'sections' subject.id %}" style="text-decoration: none">
                Разделы
            </a>
            <br><br>
            Библиотека загруженных файлов

            <br><br>
            <a href="{% url 'agreement' subject.id%}" style="text-decoration: none">
                <input type="submit" value="Загрузить на сервер" class="btn btn-outline-danger btn-block" style="width:min-content">
            </a>
        </div>
    </div>
  <div class="col-8">

    <div class="row mt-2">
        <div class="col-4">
            <div class="card">
                <div class="card-header" style='height:5rem'>
                    <h4>{{subject.title}}</h4>
                </div>
                <figure class="image is-16by9">
                    <img src="{{subject.thumbnail_file.url}}" alt="Placeholder image" class='card-image-top'>
                </figure>
                <div class="card-body">



                    <div class="row">
                        <div class="col">
                            <strong>Описание: </strong>
                            <a href='#collapse-p' data-bs-toggle="collapse" data-target="#collapse-p">
                                Ознакомиться
                            </a>
                        </div>
                    </div>

                    <!-- <div class="collapse show" id='collapse-p'> -->
                    <div class="collapse" id='collapse-p'>
                        <div class="row" style='height:fit-content'>
                            <div class="col">
                                {{subject.description}}
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <strong>Предварительные знания: </strong>
                            <a href='#collapse-pr' data-bs-toggle="collapse" data-target="#collapse-pr">
                                Ознакомиться
                            </a>
                        </div>
                    </div>


                    <div class="collapse" id='collapse-pr'>
                        <div class="row" style='height:fit-content'>
                            <div class="col">
                                {{subject.prerequisite}}
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col"><strong>Язык: </strong>{{subject.language}}</div>
                    </div>
                    <div class="row">
                        <div class="col"><strong>Категория: </strong>{{subject.category}}</div>
                    </div>
                </div>
            </div>
        </div>


        <div class="col-7 pl-3 m-1">

            <form action="{% url 'edit_subject' subject.id %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                    <label for="title"><strong>Редактировать название курса</strong></label>
                    <input type="text" class='form-control' id="title" name="title" maxlength='60'
                        placeholder='Название курса. Не более 60 символов.'>
                </div>
                <div class="form-group">
                    <label for="language"><strong>Редактировать язык курса</strong></label>
                    <select name="language" class='form-select' id="language">
                        {% for item in languages %}
                        <option value="{{item.id}}">{{item.name}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="description"><strong>Редактировать категорию</strong></label>
                    <select name="category" class='form-select' id="category">
                        {% for item in categories %}
                        <option value="{{item.id}}">{{item.name}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="description"><strong>Редактировать краткое описание курса</strong></label>
                    <textarea class='form-control' id="description" rows='4' minlength='160' maxlength='360'
                        name="description"
                        placeholder='Введите краткое описание курса. 160-360 символов.'></textarea>
                    <div class="form-group">
                        <label for="prerequisites"> <strong>Редактировать предварительную подготовку</strong></label>
                        <textarea class='form-control' rows='4' id="prerequisites" minlength='160' maxlength='360'
                            name="prerequisites"
                            placeholder='Введите требования к предварительной подготовке. 160-360 символов.'></textarea>
                    </div>
                            <div class="form-group">
                                <label for="thumbnail"> <strong>Загрузить новую картинку для курса:</strong></label>
                                <input type="file" class="form-control" id="thumbnail" name='thumbnail'>
                            </div>
                            <div class="form-row mt-3">
                                <div class="col-5">
                                    <label for="author_price"><strong>Редактировать стоимость, руб.</strong></label>
                                </div>
                                <div class="col-7">
                                    <input type="number" class='form-control' id="author_price" name="author_price" maxlength='10'><br>
                                </div>
                            </div>

                        </div>

                    
                    <div class="form-row mt-2">
                        <div class="col-3 pl-5">
                            {% if subject.discount_programs == True %}
                            <input type="checkbox" id='discount_program' class='form-check-input' name='discount_program'
                                value='discount_program' checked>
                            {% else %}
                            <input type="checkbox" id='discount_program' class='form-check-input' name='discount_program' value='discount_program'>
                            {% endif %}
                        </div>
                        <div class="col-9">
                            <label for="discount_program">
                                <strong>Я согласен участвовать в дисконтных программах ruversity.com</strong>
                            </label>
                        </div>
                    </div>

                        <div class="row mb-2">
                            <!-- <div class="col"><input type="submit" value="Edit" class="btn btn-info btn-block"></div> -->
                            <div class="col"><input type="submit" value="Редактировать"
                                    class='btn btn-sm btn-block btn-outline-dark'>
                            </div>
                        </div>
            </form>

            <div class="row mt-3">
                <div class="col">
                    <a href="{% url 'delete_subject' subject.id %}" style="text-decoration: none">
                        <!-- <input type="submit" value="Delete" class="btn btn-info btn-block"> -->
                        <input type="button" value="Удалить курс" class='btn btn-sm btn-block btn-outline-dark'>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <br>
    </div>
</div>

</div>


{% endif %}




<script>
    console.log('start OK')
    const open_sections = document.querySelectorAll('#open_sections');
    const openSectionModal = document.querySelectorAll('#openSectionModal');


    for (let i = 0; i < open_sections.length; i++) {
        open_sections[i].addEventListener('mouseover', e => {
            openSectionModal[i].classList.add('openModal')
        })
    }

    for (let i = 0; i < open_sections.length; i++) {
        open_sections[i].addEventListener('mouseout', e => {
            openSectionModal[i].classList.remove('openModal')
        })
    }
    console.log('end OK')
</script>



{% endblock %}