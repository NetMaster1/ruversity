{% extends "base.html" %}
{% load static %}
{% block content %}
<body oncontextmenu="return false;">
 

<div class="container">

    
    {% if subject.ready == True %}
    <div class="row p-3 mt-3">
        <div class="col-12">
        Your course has been uploaded to ruversisty.com & is ready for sale. Since ruversity.com provides life-time access for the buyers, you are no longer able neither to delete it nor edit. In order to make changes in the course you have to apply to us via email.
        </div>
    </div>
    {% else %}
        
    <div class="row p-3">
        <div class="col-8">
    <h5>After your course is completed & ready to be uploaded, push the button</h5>
            </div>
            
        <div class="col-2">
    <a href="{% url 'agreement' subject.id%}">
    <input type="submit" value="Upload" class="btn btn-outline-dark btn-block">
    </a>
        </div>

    </div>
   

<!-- ====================================================== -->
<div class="row border rounded bg-light text-center">
    <h5>Edit the subject</h5>
</div>

<div class="row mt-2">
    <div class="col-4">
        <div class="card">
            <div class="card-header" style='height:5rem' >
                <h4>{{subject.title}}</h4>
            </div>
            <figure class="image is-16by9">
                <img src="{{subject.thumbnail_file.url}}" alt="Placeholder image" class='card-image-top'>
            </figure>
            <div class="card-body">
            <div class="row">
                <div class="col">
                    <strong>Description: </strong>
                    <!-- <a ref='#collapse-p' data-toggle="collapse" data-target="#collapse-p">
                            Read More
                            </a> -->
                </div>
            </div>
            <div class="row" style='height:6rem'>
                <div class="col">
                    {{subject.description}}
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <strong>Prerequisites: </strong>
                </div>
            </div>
            <div class="row" style='height:6rem'>
                <div class="col">
                    {{subject.prerequisite}}
                </div>
            </div>

             
            <div class="row">
                <div class="col"><strong>Language: </strong>{{subject.language}}</div>
            </div>
            <div class="row">
                <div class="col"><strong>Category: </strong>{{subject.category}}</div>
            </div>
        </div>
    </div>
</div>


    <div class="col-7 p-3 m-1">
       
    <form action="{% url 'edit_subject' subject.id %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
                <input type="text" class='form-control' id="title" name="title" maxlength='50' required placeholder='Edit title of the subject'>
            </div>
            <div class="form-group">
                <select name="language" class='form-select' id="language" required>
                    {% for item in languages %}
                    <option value="{{item.id}}">{{item.name}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                    <select name="category" class='form-select' id="category" required>
                        {% for item in categories %}
                        <option value="{{item.id}}">{{item.name}}</option>
                        {% endfor %}
                    </select>
            </div>
            <div class="form-group">
                <label for="description">Edit short description for the subject:</label>
                <textarea class='form-control' id="description" rows='3' minlength='120' maxlength='180' name="description" required placeholder='Please, enter short description from 120 to 180 symbols'></textarea>
            <div class="form-group">
                <label for="prerequisites">Edit prerequisites for the subject:</label>
                <textarea class='form-control' rows='3' id="prerequisite" minlength='120' maxlength='180' minlength='150'name="prerequisite" required></textarea>
            <div>
            <div class="form-group">
                <label for="thumbnail">Load new thumbnail for the subject:</label>
                <input type="file" class="form-control" id="thumbnail" name='thumbnail' required>
            </div>
            </div>

   
        <div class="row mb-2">
            <!-- <div class="col"><input type="submit" value="Edit" class="btn btn-info btn-block"></div> -->
            <div class="col"><input type="submit" value="Edit" class='btn btn-sm btn-block btn-outline-dark'></div>     
        </div>
</form>

        <div class="row mt-3">
            <div class="col">
                <a href="{% url 'delete_subject' subject.id %}">
                    <!-- <input type="submit" value="Delete" class="btn btn-info btn-block"> -->
                    <input type="button" value="Delete" class='btn btn-sm btn-block btn-outline-dark'>
                </a>
            </div>
        </div>
    </div>
</div>
</div>
</div>
  
<!-- ============================================================= -->

    <div class="row mt-3 border rounded bg-light text-center">
        <h5>Create new section</h5>
    </div>
    <div class="row mt-2 pb-3 border rounded">
    
        <form action="{% url 'create_new_section' subject.id %}" method="POST">
            {% csrf_token %}
    
            <div class="form-row">
                <div class="col-3">
                    <label for="title">
                        <h5>Add new section:</h5>
                    </label>
                    <input class='form-control' type="text" id="title" name="title" placeholder="Section Title" required>
                </div>
    
                <div class="col-2 align-self-end">
                    <!-- <button type='submit' value="Create" class="btn btn-info btn-block"> -->
                    <!-- <input type="submit" value="Create" class="btn btn-info btn-block "> -->
                    <input type="submit" value="Create" class='btn btn-sm btn-block btn-outline-dark'>
                    <input type="reset" value="Clear" class="btn btn-sm btn-block btn-outline-dark">
                </div>
            </div>
    </div>
    </form>
    
    </div>
    </div>


<!-- =================================================================== -->
    



<div class="row mt-3 border rounded bg-light text-center">
    <h5>Create new lecture</h5>
</div>
    <div class="row mt-2 pb-3 border rounded">
       
                    <form action="{% url 'create_new_lecture' subject.id %}" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}

                        <div class="form-row"> 
                            <div class="col-3">
                        <label for="title"><h5>Add new lecture:</h5></label>
                        <input class='form-control' type="text" id="title" name="title" placeholder="Lecture Title" required>
                        </div>
                            <div class="col-3">
                                    <label for="video_file"><h5>Load new mp4 file:</h5></label>
                                    <input type="file" class="form-control" id="video_file" name="video_file" required>
                                </div>
                           
                     
                           <div class="col-3 align-self-end ml-5">
                        <input type="checkbox" id='free_access' class='form-check-input' name='free_access' value='free_access'>
                        <label for="free_access" class='form-check-label'>
                            <h5>Check to grant free access</h5>
                        </label>
                        </div>
                            
                     
                        <div class="col-2 align-self-end">
                        <!-- <button type='submit' value="Create" class="btn btn-info btn-block"> -->
                        <!-- <input type="submit" value="Create" class="btn btn-info btn-block "> -->
                        <input type="submit" value="Create" class='btn btn-sm btn-block btn-outline-dark'>
                        <input type="reset" value="Clear" class="btn btn-sm btn-block btn-outline-dark">
                        </div>
                        </div>
                        </div>
                    </form>
        
    </div>
</div>
                    

    <!-- ====================================================================== -->


    <div class="row mt-3 border rounded bg-light text-center">
        <h5>Edit lectures</h5>
    </div>

    
    {% for lecture in lectures %}
    <div class="row m-2">
        <div class="col-3 border rounded m-1">
            <div class="row">
            <div class="col p-2">
                    {{lecture.title}}<br>
                    {{lecture.length}} min<br>
                    {{lecture.size_mb}} mb
            </div>
            <div class="col p-2">
                    <!-- <a class="nav-link" href="{{ lecture.video_file.url }}" target='_blank'> -->
                    <a>
                    <video oncontextmenu="return false;" width="160" height="120" controls controlsList="nodownload">
                    <!-- video width="320" height="240" controls controlsList="nodownload"> -->
                        <source src="{{lecture.video_file.url}}" type="video/mp4">
                    </video>
                    </a>
            </div>
            </div>
        </div>

        <div class="col-6 p-3 border rounded m-1">
            <form action="{% url 'edit_lecture' lecture.id %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-row">
                <input class='form-control' type="text" id="title" name="title" placeholder="Lecture Title" required>
                </div>
                <div class="form-row">
                <label for="description">Add short description for the lecture:</label>
                <textarea class='form-control mb-3' name="description" rows='2' id='description' required>
                </textarea>
                <input type="file" class="form-control" id="video_file" name="video_file" required>
                </div>
                
        </div>
        <div class="col-2 p-3 border rounded m-1">
            <div class="row m-1">
                <!-- <div class="col"><input type="submit" value="Edit" class="btn btn-info btn-block"></div> -->
                <div class="col"><input type="submit" value="Edit" class='btn btn-sm btn-block btn-outline-dark'></div>
                </form>
            </div>
            <div class="row m-1">
                <div class="col">
                    <a href="{% url 'delete_lecture' lecture.id %}">
                        <!-- <input type="submit" value="Delete" class="btn btn-info btn-block"> -->
                        <input type="submit" value="Delete" class='btn btn-sm btn-block btn-outline-dark'>
                    </a>
                </div>
            </div>
        </div>
       
        </div>
      
{% endfor %}
        </div>
    </div>
</div>
    {% endif %}

</div>

{% endblock %}