{% extends "base.html" %}
{% block content %}


<div class="container">
    <div class="row m-auto">
        <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);"
            aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'studio' %}">Творческая студия</a></li>
                <li class="breadcrumb-item"><a href="{% url 'edit_subject' subject.id %}">Редактирование курса</a></li>
                <li class="breadcrumb-item"><a href="{% url 'sections' subject.id %}">Разделы</a></li>

                <li class="breadcrumb-item active" aria-current="page">Лекция</li>
            </ol>
        </nav>
    </div>

 
        <div class='editLectureBox'>
            <div class="row m-auto">
                <div class="col-11"><h5>Лекция: {{lecture.title}}</h5></div>
                <div class="col-1">
                <a href="{%url 'sections' subject.id%}" style="text-decoration: none">
                <h1 class="closeCross">&times;</h1>
                </a>
                </div>
               
            </div>
            <hr>
         
            <div class="row m-auto">
                <h5>Выберите тип наполнения лекции: <i class="fa-solid fa-folder-open"></i> </h5>
                {% if lecture.video_file%}
                <div class="row m-auto">
                Видеофайл: {{lecture.video_file}}
                </div>
                {% endif %}
                    {%  if lecture.quizquestion_set.filter.exists %}
                    <a href="{% url 'quiz_creation' lecture.id %}">
                        Тесты
                    </a>
                {% endif %}
            </div>
            <hr>
            <div class="row m-auto pb-2">
                <div class="col-3">
                    <input type="button" value="Видеофайл" id="videoFile" class="btn btn-sm btn-block btn-outline-dark videoFileButton">
                </div>
                <div class="col-3">
                    <a href="{% url 'quiz_creation' lecture.id%}" style="text-decoration: none">
                        <input type="button" value="Тест" id="test" class="btn btn-sm btn-block btn-outline-dark">
                    </a>
                </div>
                <div class="col-3">
                    <input type="button" value="Текстовый файл" id="docFile" class="btn btn-sm btn-block btn-outline-dark">
                </div>
             
                <div class="col-3">
                    <input type="button" value="Ссылка на код" id="code" class="btn btn-sm btn-block btn-outline-dark">
                </div>
               

            </div>
      

<!-- ========================================VideoFileModule======================= -->
<div class="videoFileModule">
    <div class="hide">
        <div class="file_box">
            <div class="row">
                <div class="col-11"></div>
                <div class="col-1"><h1 class="closeCross" id="closeCross">&times;</h1></div>
            </div>
      
        
           
            <form action="{% url 'lecture_update' subject.id section.id lecture.id %}" method="POST"
                enctype="multipart/form-data">
                {% csrf_token %}
                    
                    
                <div class="form-row m-auto">
                  
                    <div class="col-5">
                        <label for="file">
                            Выберите видеофайл из вашего хранилища:
                        </label>
                    </div>
                    <div class="col-5">
                        <input type="file" class="form-control" id="file" name="file" required>
                    </div>
                    <div class="col-2">
                        <input type="submit" value="Загрузить" class='btn btn-block btn-outline-dark'>
                    </div>
                   
                </div>
            </form>
            <div class="row m-auto">
                <div class="text-center mb-4 mt-3">ИЛИ</div>
            </div>

            <div data-bs-toggle="collapse" data-bs-target='#v_files'>
                    <button class='btn btn-block btn-outline-dark'>
                        Выберите файл из библиотеки ранее загруженных файлов:
                    </button>
            </div>

            <div class="collapse mt-3" id='v_files' style="height:fit-content">
                {% for v_file in v_files %}

                <div class="row m-1">
                    <div class="col-8">{{v_file.video_file}}</div>
                    <div class="col-4">
                        <a href="{% url 'lecture_update_from_lib' lecture.id v_file.id%}"
                            style="text-decoration: none">
                            <input type="button" value="Загрузить из библиотеки"
                                class='btn btn-sm btn-block btn-outline-dark'>
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>

        </div>
    </div>
</div>
<!-- ==========================End of Video File Module======================================================== -->



        </div>
    

</div>

<script>
        const videoFileButton = document.querySelector('.videoFileButton');
        const videoFileModule = document.querySelector('.videoFileModule');
        const fileUploadButton = document.querySelector('.fileUploadButton');
        const fileLibButton = document.querySelector('.fileLibButton');
        const fileLibUploadModule = document.querySelector('.fileLibUploadModule');
        const testButton = document.querySelector('.test_button');
        const closeCross=document.querySelector('#closeCross')
      
         
        videoFileButton.addEventListener('click', () => {
            videoFileModule.classList.add('openModal')
            //formWrapper.remove()
            //formWrapper.classList.add('hidden')
        })

        closeCross.addEventListener('click', () => {
            videoFileModule.classList.remove('openModal')
        })


</script>

{% endblock %}